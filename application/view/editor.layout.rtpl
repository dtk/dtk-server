<html>
<head>
<!--
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?3.2.0/build/cssreset/reset.css&3.2.0/build/cssfonts/fonts.css">
-->

<link rel="SHORTCUT ICON" href="{%=_app[:base_images_uri]%}/icon-black.ico" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_js_uri]%}/external/yui/build/cssreset/reset.css">
<link rel="stylesheet" type="text/css" href="{%=_app[:base_js_uri]%}/external/yui/build/cssfonts/fonts.css">
<link rel="stylesheet" type="text/css" href="{%=_app[:base_js_uri]%}/external/yui/build/cssgrids/grids.css">

<!--//TODO: revisit to variablize the path of the founcation css-->
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/form.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/topbar.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/cmdbar.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/toolbar.css" />

<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/list.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/search.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/inventory.layout.css" />
<link rel="stylesheet" type="text/css" href="{%=_app[:base_css_uri]%}/editor.css" />

{%for css_include in _app[:css_includes]%}
	<link rel="stylesheet" type="text/css" href="{%=css_include%}" />
{%end%}

</head>

	<body class="yui3-skin-sam  yui-skin-sam" style="overflow: hidden;">
	<div id="page-container" class="page-container">
		<div id="page-topbar" class="top-bar">
			<div id="menu-bar" class="yui3-g menu-bar grey">
				<div class="yui3-u left-cap"></div>
				<div class="yui3-u body">
					<div class="logo black"></div>
					<div class="item"><a href="{%=_app[:base_uri]%}/xyz/component/list">Library</a></div>
					<div class="item"><a href="{%=_app[:base_uri]%}/xyz/workspace">Workspace</a></div>
					<div class="item"><a href="{%=_app[:base_uri]%}/xyz/datacenter/list">Dashboard</a></div>
					<div class="item"><a href="{%=_app[:base_uri]%}/xyz/node/list" style="color: #4FA4D0">Inventory</a></div>
					<div class="divider"></div>
				</div>
				<div class="yui3-u right-cap"></div>
			</div>
		</div>
		<div id="main-body-wrapper" class="main-body-wrapper">
			<div id="file-explorer">
				<div style="height: 30px; width: 150px; margin: 10px;">
					<a href="javascript:R8.Editor.loadFile('1');">apache2.conf.erb</a><br/>
					<a href="javascript:R8.Editor.loadFile('2');">metadata.json</a><br/>
					<a href="javascript:R8.Editor.loadFile('3');">metadata.rb</a><br/>
					<a href="javascript:R8.Editor.loadFile('4');">default.rb</a><br/>
				</div>
			</div>
			<div id="editor"></div>
		</div>
		</div>
	</div>


<script type="text/javascript">
YUI_config = {
	base: '{%=_app[:base_js_uri]%}/external/yui/build/',
	groups: {
		gallery: {
			base: '{%=_app[:base_js_uri]%}/external/yui/gallery/'
		}
	},
	modules: {}
};
</script>

<script>

window.onload = function() {
	R8.Editor.init();
};

function getSelection() {
	console.log(editor.getSelectionRange());
//	alert(editor.getSession().doc.getTextRange(editor.getSelectionRange()));
}

function swapAttrVar() {
	editor.insert("<% foobut %>");
}
</script>

<!-- JS -->

<script src="{%=_app[:base_js_uri]%}/external/jquery.js"></script>
<script src="{%=_app[:base_js_uri]%}/external/jquery.cookie.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/external/yui/build/yui/yui.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/external/yui/build/loader/loader.js"></script>

<script type="text/javascript" src="{%=_app[:base_js_uri]%}/ctrl.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/utils.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/model.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/canvas.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/templating.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/workspace.r8.js"></script>
<!--<script type="text/javascript" src="{%=_app[:base_js_uri]%}/cmdbar.r8.js"></script>-->

<script src="{%=_app[:base_js_uri]%}/external/ace/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="{%=_app[:base_js_uri]%}/external/ace/src/mode-ruby.js" type="text/javascript" charset="utf-8"></script>
<script src="{%=_app[:base_js_uri]%}/external/ace/src/theme-twilight.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="{%=_app[:base_js_uri]%}/editor.r8.js"></script>

<script type="text/javascript" src="{%=_app[:base_js_uri]%}/toolbargroup.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/topbar.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/toolbar.r8.js"></script>
<script type="text/javascript" src="{%=_app[:base_js_uri]%}/page.r8.js"></script>


<script type="text/javascript">
R8.config = {};
R8.config['base_uri'] = '{%=_app[:base_uri]%}/xyz';
</script>

	<div id="js_include_container">
		{%for js_include in _app[:js_includes]%}
			<script type="text/javascript" src="{%=js_include%}"></script>
		{%end%}
		<script type="text/javascript">
		{%for js_exe in _app[:js_exe_list]%}
			{%=js_exe%}
		{%end%}
		</script>
	</div>

	</body>
</html>

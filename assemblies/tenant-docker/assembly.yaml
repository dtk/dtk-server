---
name: tenant-docker
dsl_version: 0.9.1
node_bindings:
  tenant: precise-medium
assembly:
  nodes:
    tenant:
      components:
      - dtk
      - stdlib
      - vcsrepo::include
      - sysctl::include
      - dtk_java
      - dtk_postgresql::server
      - dtk_activemq
      - dtk_postgresql::db:
          attributes:
            db_name: dtk1docker
            name: dtk1docker
      - dtk_nginx::base
      - docker
      - dtk_server::docker:
          attributes:
            tenant_user: "dtk1docker"
            docker_image: "getdtk/dtk:latest"
            #stomp_server_host: 'dtk1docker.dtk.io'
            #local_repo_host: 'dtk1docker.dtk.io'
            #server_public_dns: 'dtk1docker.dtk.io'
            db_host: '/var/run/postgresql'
            db_name: 'dtk1docker'
            activemq_password: "marionette"
            activemq_subcollective: "mcollective"
            remote_repo_git_user: "git"
            remote_repo_port: "443"
            #gitolite_host: "dtk1docker.dtk.io"
workflow:
  assembly_action: create
  node: tenant
  ordered_components:
  - dtk
  - stdlib
  - vcsrepo::include
  - sysctl::include
  - dtk_java
  - dtk_activemq
  - dtk_postgresql::server
  - dtk_postgresql::db[dtk1docker]
  - dtk_nginx::base
  - docker
  - dtk_server::docker



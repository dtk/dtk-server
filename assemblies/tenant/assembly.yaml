---
name: tenant
dsl_version: 0.9.1
node_bindings:
  tenant: precise-medium
assembly:
  nodes:
    tenant:
      components:
      - dtk_server::tenant:
          attributes:
            gitolite_user: git16
            server_branch: master
            tenant_user: dtk16
            name: tenant
      - gitolite:
          attributes:
            gitolite_user: git16
            name: tenant
      - dtk
      - stdlib
      - common_user:
          attributes:
            user: git16
            name: tenant
      - dtk_java
      - thin:
          attributes:
            app_dir: /home/dtk16/server/application
            daemon_user: dtk16
      - dtk_postgresql::server
      - dtk_postgresql::db:
          attributes:
            db_name: dtk16
            name: tenant
      - dtk_server::ruby193install:
          attributes:
            install: true
            name: tenant
      - dtk_server::add_user:
          attributes:
            tenant_db_user: dtk16
            tenant_user: dtk16
            name: tenant
      - dtk_server::base
      - vcsrepo::include
      - common_user::common_user_ssh_config:
          attributes:
            user: dtk16
            name: tenant
      - dtk_activemq
      - gitolite::admin_client:
          attributes:
            client_name: dtk16
            gitolite_user: git16
            name: tenant
      - sysctl::include
workflow:
  assembly_action: create
  node: tenant
  ordered_components:
  - stdlib
  - sysctl::include
  - dtk
  - dtk_java
  - dtk_activemq
  - common_user[tenant]
  - gitolite[tenant]
  - dtk_server::ruby193install[tenant]
  - dtk_server::base
  - dtk_postgresql::server
  - dtk_postgresql::db[tenant]
  - dtk_server::tenant[tenant]
  - gitolite::admin_client[tenant]
  - thin
  - vcsrepo::include
  - common_user::common_user_ssh_config[tenant]
  - dtk_server::add_user[tenant]

--- !omap 
- gitolite: !omap 
    - display_name: gitolite
    - description: Gitolite server
    - external_ref: 
        definition_name: gitolite
        type: puppet_definition
    - basic_type: service
    - component_type: gitolite
    - only_one_per_node: false
    - attribute: !omap 
        - name: !omap 
            - display_name: name
            - description: Gitolite service user name
            - data_type: string
            - required: true
            - external_ref: 
                type: puppet_attribute
                path: node[gitolite][name]
    - dependency: 
        stdlib: 
          type: component
          search_pattern: 
            ":filter": 
            - ":eq"
            - ":component_type"
            - stdlib
          display_name: stdlib
          description: stdlib is required for gitolite
          severity: warning
- gitolite__admin_client: !omap 
    - display_name: gitolite__admin_client
    - description: Gitolite admin client
    - external_ref: 
        definition_name: gitolite::admin_client
        type: puppet_definition
    - basic_type: service
    - component_type: gitolite__admin_client
    - only_one_per_node: false
    - attribute: !omap 
        - name: !omap 
            - display_name: name
            - description: Client linux account name
            - data_type: json
            - required: true
            - external_ref: 
                type: puppet_attribute
                path: node[gitolite__admin_client][name]
        - gitolite_user: !omap 
            - display_name: gitolite_user
            - description: User name for gitolite server
            - data_type: json
            - required: true
            - external_ref: 
                type: puppet_attribute
                path: node[gitolite__admin_client][gitolite_user]
    - component_order: 
        dtk_server__tenant:
          after: dtk_server__tenant
        test__gitolite_precondition:
          after: test__gitolite_precondition
    - dependency: 
        gitolite: 
          type: component
          search_pattern: 
            ":filter": 
            - ":eq"
            - ":component_type"
            - gitolite
          display_name: gitolite
          description: gitolite is required for gitolite__admin_client
          severity: warning
         